{% extends "base.html" %}

{% block title %}Devocionais Personalizados - Transforme seus momentos com Deus{% endblock %}

{% block content %}
<!-- CONTE√öDO DIN√ÇMICO BASEADO EM AUTENTICA√á√ÉO -->
<div id="landing-page-content" style="display: none;">
    <!-- LANDING PAGE DE CONVERS√ÉO -->
    <div class="landing-page">
        <!-- Hero Section -->
        <section class="hero-section">
            <div class="hero-container">
                <div class="hero-content">
                    <div class="hero-badge">
                        <span class="badge-icon">‚ú®</span>
                        <span>Mais de 10.000 pessoas transformadas</span>
                    </div>
                    
                    <h1 class="hero-title">
                        Transforme seus <span class="highlight">momentos dif√≠ceis</span> 
                        em <span class="highlight">encontros com Deus</span>
                    </h1>
                    
                    <p class="hero-subtitle">
                        Receba devocionais personalizados baseados exatamente no que voc√™ est√° sentindo. 
                        Uma palavra de Deus espec√≠fica para o seu cora√ß√£o, no momento que voc√™ mais precisa.
                    </p>
                    
                    <div class="hero-stats">
                        <div class="stat-item">
                            <div class="stat-number">98%</div>
                            <div class="stat-label">Sentem paz ap√≥s usar</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">5min</div>
                            <div class="stat-label">Para gerar seu devocional</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-number">24/7</div>
                            <div class="stat-label">Dispon√≠vel sempre</div>
                        </div>
                    </div>
                    
                    <div class="hero-cta">
                        <button onclick="startFreeExperience()" class="cta-button primary-cta">
                            <span class="cta-icon">üôè</span>
                            <span class="cta-text">Experimentar Gr√°tis Agora</span>
                            <span class="cta-subtitle">Seu primeiro devocional √© gratuito</span>
                        </button>
                        
                        <div class="trust-indicators">
                            <span class="trust-item">‚ö° Resultado em 30 segundos</span>
                            <span class="trust-item">üîí 100% Seguro e Privado</span>
                            <span class="trust-item">‚ù§Ô∏è Baseado na B√≠blia</span>
                        </div>
                    </div>
                </div>
                
                <div class="hero-visual">
                    <div class="preview-card">
                        <div class="preview-header">
                            <div class="preview-avatar">üôè</div>
                            <div class="preview-info">
                                <div class="preview-name">Devocional para Maria</div>
                                <div class="preview-feeling">Sentindo ansiedade</div>
                            </div>
                        </div>
                        <div class="preview-content">
                            <h3>"N√£o andeis ansiosos por coisa alguma..."</h3>
                            <p>Querida Maria, sei que seu cora√ß√£o est√° inquieto hoje. As preocupa√ß√µes parecem maiores que sua f√©, mas...</p>
                            <div class="preview-verse">üìñ Filipenses 4:6-7</div>
                        </div>
                    </div>
                    
                    <div class="floating-elements">
                        <div class="floating-heart">üíñ</div>
                        <div class="floating-star">‚≠ê</div>
                        <div class="floating-dove">üïäÔ∏è</div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Problem Section -->
        <section class="problem-section">
            <div class="container">
                <h2 class="section-title">Voc√™ j√° se sentiu assim?</h2>
                
                <div class="problem-grid">
                    <div class="problem-card">
                        <div class="problem-icon">üò∞</div>
                        <h3>Ansiedade tomando conta</h3>
                        <p>Preocupa√ß√µes que n√£o saem da mente, medos sobre o futuro, aquela sensa√ß√£o de que tudo pode dar errado...</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">üò¢</div>
                        <h3>Tristeza profunda</h3>
                        <p>Momentos de melancolia, luto, decep√ß√µes que doem no peito e fazem questionar onde Deus est√°...</p>
                    </div>
                    
                    <div class="problem-card">
                        <div class="problem-icon">üòî</div>
                        <h3>Solid√£o espiritual</h3>
                        <p>Sensa√ß√£o de dist√¢ncia de Deus, ora√ß√µes que parecem n√£o ser ouvidas, falta de dire√ß√£o na vida...</p>
                    </div>
                </div>
                
                <div class="problem-statement">
                    <p>Nesses momentos, voc√™ precisa de mais do que um devocional gen√©rico. Voc√™ precisa de uma palavra que fale diretamente ao seu cora√ß√£o.</p>
                </div>
            </div>
        </section>
        
        <!-- Solution Section -->
        <section class="solution-section">
            <div class="container">
                <div class="solution-content">
                    <div class="solution-text">
                        <h2 class="section-title">Imagine receber uma carta de Deus escrita especialmente para voc√™</h2>
                        
                        <div class="solution-benefits">
                            <div class="benefit-item">
                                <div class="benefit-icon">üéØ</div>
                                <div class="benefit-text">
                                    <h4>Personalizado para seu momento</h4>
                                    <p>N√£o √© um devocional aleat√≥rio. √â uma mensagem criada com base no que voc√™ est√° vivendo agora.</p>
                                </div>
                            </div>
                            
                            <div class="benefit-item">
                                <div class="benefit-icon">üìö</div>
                                <div class="benefit-text">
                                    <h4>Fundamentado na Palavra</h4>
                                    <p>Cada devocional inclui vers√≠culos b√≠blicos relevantes e uma reflex√£o profunda e consoladora.</p>
                                </div>
                            </div>
                            
                            <div class="benefit-item">
                                <div class="benefit-icon">‚ö°</div>
                                <div class="benefit-text">
                                    <h4>Dispon√≠vel a qualquer hora</h4>
                                    <p>Seja 2h da manh√£ ou no meio do dia de trabalho - quando voc√™ precisar, estamos aqui.</p>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="solution-visual">
                        <div class="solution-demo">
                            <div class="demo-step active" data-step="1">
                                <div class="step-number">1</div>
                                <div class="step-content">
                                    <h4>Compartilhe seu sentimento</h4>
                                    <div class="step-example">"Estou me sentindo perdido na vida..."</div>
                                </div>
                            </div>
                            
                            <div class="demo-step" data-step="2">
                                <div class="step-number">2</div>
                                <div class="step-content">
                                    <h4>Aguarde 30 segundos</h4>
                                    <div class="step-example">Nossa IA analisa e busca na B√≠blia</div>
                                </div>
                            </div>
                            
                            <div class="demo-step" data-step="3">
                                <div class="step-number">3</div>
                                <div class="step-content">
                                    <h4>Receba sua mensagem</h4>
                                    <div class="step-example">Um devocional √∫nico para voc√™</div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Social Proof Section -->
        <section class="social-proof-section">
            <div class="container">
                <h2 class="section-title">Veja o que outras pessoas est√£o dizendo</h2>
                
                <div class="testimonials-grid">
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p>"Foi exatamente o que eu precisava ouvir. Como se Deus tivesse falado diretamente comigo atrav√©s deste devocional."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">üë©</div>
                            <div class="author-info">
                                <div class="author-name">Ana Paula</div>
                                <div class="author-location">S√£o Paulo, SP</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p>"Uso todos os dias. √â incr√≠vel como sempre recebo a palavra certa para o que estou passando. Mudou minha rotina de ora√ß√£o."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">üë®</div>
                            <div class="author-info">
                                <div class="author-name">Carlos Silva</div>
                                <div class="author-location">Rio de Janeiro, RJ</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="testimonial-card">
                        <div class="testimonial-content">
                            <div class="stars">‚≠ê‚≠ê‚≠ê‚≠ê‚≠ê</div>
                            <p>"Estava passando por uma fase muito dif√≠cil. O devocional que recebi me trouxe uma paz que eu n√£o sentia h√° meses."</p>
                        </div>
                        <div class="testimonial-author">
                            <div class="author-avatar">üë©‚Äçü¶≥</div>
                            <div class="author-info">
                                <div class="author-name">Maria Santos</div>
                                <div class="author-location">Belo Horizonte, MG</div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Urgency Section -->
        <section class="urgency-section">
            <div class="container">
                <div class="urgency-content">
                    <h2>Seu cora√ß√£o est√° esperando uma palavra de Deus</h2>
                    <p>Cada dia que passa sem essa conex√£o especial com Deus √© um dia a menos de paz, dire√ß√£o e prop√≥sito em sua vida.</p>
                    
                    <div class="urgency-stats">
                        <div class="urgency-stat">
                            <div class="stat-icon">‚è∞</div>
                            <div class="stat-text">
                                <div class="stat-title">Apenas 2 minutos</div>
                                <div class="stat-desc">Para transformar seu dia</div>
                            </div>
                        </div>
                        
                        <div class="urgency-stat">
                            <div class="stat-icon">üéÅ</div>
                            <div class="stat-text">
                                <div class="stat-title">Primeiro devocional gr√°tis</div>
                                <div class="stat-desc">Sem compromisso</div>
                            </div>
                        </div>
                    </div>
                    
                    <button onclick="startFreeExperience()" class="cta-button secondary-cta">
                        <span class="cta-text">Quero Meu Devocional Personalizado</span>
                        <span class="cta-arrow">‚Üí</span>
                    </button>
                </div>
            </div>
        </section>
        
        <!-- FAQ Section -->
        <section class="faq-section">
            <div class="container">
                <h2 class="section-title">Perguntas Frequentes</h2>
                
                <div class="faq-grid">
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>Como funciona o devocional personalizado?</span>
                            <span class="faq-icon">+</span>
                        </button>
                        <div class="faq-answer">
                            <p>Voc√™ compartilha como est√° se sentindo, nossa intelig√™ncia artificial analisa seu estado emocional e busca na B√≠blia vers√≠culos e palavras que falam diretamente ao seu cora√ß√£o. Em segundos, voc√™ recebe um devocional √∫nico e personalizado.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>√â realmente baseado na B√≠blia?</span>
                            <span class="faq-icon">+</span>
                        </button>
                        <div class="faq-answer">
                            <p>Absolutamente! Todos os devocionais s√£o fundamentados nas Sagradas Escrituras. Utilizamos vers√≠culos b√≠blicos relevantes e criamos reflex√µes que est√£o alinhadas com os ensinamentos crist√£os.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>Meus dados pessoais ficam seguros?</span>
                            <span class="faq-icon">+</span>
                        </button>
                        <div class="faq-answer">
                            <p>Sim! Seus sentimentos e informa√ß√µes s√£o tratados com total privacidade e seguran√ßa. N√£o compartilhamos seus dados com terceiros e voc√™ pode deletar suas informa√ß√µes a qualquer momento.</p>
                        </div>
                    </div>
                    
                    <div class="faq-item">
                        <button class="faq-question" onclick="toggleFaq(this)">
                            <span>Posso usar quantas vezes quiser?</span>
                            <span class="faq-icon">+</span>
                        </button>
                        <div class="faq-answer">
                            <p>O primeiro devocional √© completamente gratuito. Ap√≥s isso, oferecemos planos acess√≠veis para voc√™ continuar recebendo palavras personalizadas de Deus sempre que precisar.</p>
                        </div>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- Final CTA -->
        <section class="final-cta-section">
            <div class="container">
                <div class="final-cta-content">
                    <h2>Deus tem uma palavra especial para voc√™ hoje</h2>
                    <p>N√£o deixe esse momento passar. Clique abaixo e receba sua mensagem personalizada agora mesmo.</p>
                    
                    <button onclick="startFreeExperience()" class="cta-button final-cta">
                        <span class="cta-icon">‚ú®</span>
                        <span class="cta-text">Come√ßar Minha Jornada Espiritual</span>
                    </button>
                    
                    <div class="final-guarantees">
                        <span>üîí Seguro e Privado</span>
                        <span>‚ö° Resultado em 30 segundos</span>
                        <span>üíù Primeiro devocional gr√°tis</span>
                    </div>
                </div>
            </div>
        </section>
    </div>
</div>

<div id="auth-check-loading" class="auth-loading">
    <div class="loading-spinner"></div>
    <p>Verificando acesso...</p>
</div>

<script>
// Verifica√ß√£o de autentica√ß√£o e redirecionamento
async function checkAuthAndRedirect() {
    const loadingDiv = document.getElementById('auth-check-loading');
    const landingDiv = document.getElementById('landing-page-content');
    
    try {
        const token = localStorage.getItem('auth_token');
        
        if (token) {
            // Verificar se o token √© v√°lido
            const response = await fetch('/api/user/me', {
                headers: {
                    'Authorization': `Bearer ${token}`
                }
            });
            
            if (response.ok) {
                const data = await response.json();
                if (data.authenticated) {
                    // Usu√°rio autenticado - redirecionar para dashboard
                    window.location.href = '/dashboard';
                    return;
                }
            }
        }
        
        // Usu√°rio n√£o autenticado - mostrar landing page
        loadingDiv.style.display = 'none';
        landingDiv.style.display = 'block';
        
        // Inicializar funcionalidades da landing page
        initializeLandingPage();
        
    } catch (error) {
        console.error('Erro na verifica√ß√£o de autentica√ß√£o:', error);
        // Em caso de erro, mostrar landing page
        loadingDiv.style.display = 'none';
        landingDiv.style.display = 'block';
        initializeLandingPage();
    }
}

function initializeLandingPage() {
    // FAQ functionality
    window.toggleFaq = function(button) {
        const answer = button.nextElementSibling;
        const icon = button.querySelector('.faq-icon');
        
        if (answer.style.display === 'block') {
            answer.style.display = 'none';
            icon.textContent = '+';
        } else {
            answer.style.display = 'block';
            icon.textContent = '-';
        }
    };
    
    // CTA button functionality
    window.startFreeExperience = function() {
        window.location.href = '/login?from=landing';
    };
    
    // Demo animation
    animateDemo();
}

function animateDemo() {
    const steps = document.querySelectorAll('.demo-step');
    let currentStep = 0;
    
    if (steps.length === 0) return;
    
    setInterval(() => {
        steps.forEach(step => step.classList.remove('active'));
        steps[currentStep].classList.add('active');
        currentStep = (currentStep + 1) % steps.length;
    }, 3000);
}

// Inicializar quando a p√°gina carregar
document.addEventListener('DOMContentLoaded', checkAuthAndRedirect);
</script>

<style>
.auth-loading {
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 60vh;
    text-align: center;
}

.loading-spinner {
    width: 50px;
    height: 50px;
    border: 4px solid #f3f3f3;
    border-top: 4px solid var(--primary-color);
    border-radius: 50%;
    animation: spin 1s linear infinite;
    margin-bottom: 20px;
}

@keyframes spin {
    0% { transform: rotate(0deg); }
    100% { transform: rotate(360deg); }
}
</style>
{% endblock %}
